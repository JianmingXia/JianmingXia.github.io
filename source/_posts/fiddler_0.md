---
title: fiddler抓包之旅
date: 2017/12/31 12:00:00
tags:
  - fiddler
categories: fiddler
---

## 小程序抓包
### 前言
之前更新了一版小程序的后台，用户转发的链接被其他人点击后，一直提示`未知错误`，这种情况完全不在预料中，并且之后再也没有办法复现。而且，小程序转发的内容没有办法知道链接是什么（如果有人知道请一定要告诉我）。所以现在最重要的就是知道，`未知错误`到底是如何出现的。

### 解决办法
原先计划是后台加一个log，分析下调用后台接口时发生了什么。受`冲顶大会`接口暴露的影响，昨天在家突然想到抓包这个方法，于是今天到公司说做就做。
这部分教程很多，在此不再重复，[贴一个链接](http://blog.csdn.net/wangjun5159/article/details/52202059)。
前提条件：手机与pc在同一个局域网

<!-- more -->
#### fiddler 设置
- 设置抓https和解密https：抓小程序的包，毫无疑问，必须是https，而且，现在https应该是标配了吧，当然，我上面贴的csdn没有...
- 设置远程链接：因为实在手机上操作小程序
- 安装certmaker插件：生成兼容ios和安卓的可靠证书，[下载地址](https://www.telerik.com/fiddler/add-ons)
![](https://img.ryoma.top/Fiddler/certmarker.png)

#### 手机设置
我的是ios，以我为例。
- 与电脑连上同一个wifi
- 在连接的wifi处设置http代理：IP是电脑的ip，端口是在fiddler中设置的端口，默认是8888
- 安装证书：safari中输入连接ip:8888，下载证书并安装
- **添加信任证书**：最重要的一步，一定不要忘记

万事皆备，开始抓包吧！